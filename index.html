<!doctype html>
<html>
<head>
    <title>Network | Basic usage</title>

    <script type="text/javascript" src="js/vis.js"></script>
    <link href="css/vis-network.min.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        #mynetwork {
            width: 900px;
            height: 800px;
            border: 1px solid lightgray;
        }
    </style>
</head>
<body>

<p>
    Create a simple network with some nodes and edges.
</p>

<div id="mynetwork"></div>

<script type="text/javascript">
    // create an array with nodes
    var nodes = new vis.DataSet([
        {id: 1, label: 'Node 1'},
        {id: 2, label: 'Node 2'},
        {id: 3, label: 'Node 3'},
        {id: 4, label: 'Node 4'},
        {id: 5, label: 'Node 5'}
    ]);

    // create an array with edges
    var edges = new vis.DataSet([
        {from: 1, to: 3},
        {from: 1, to: 2},
        {from: 2, to: 4},
        {from: 2, to: 5},
        {from: 3, to: 3}
    ]);

    // create a network
    var container = document.getElementById('mynetwork');
    var data = {
        nodes: nodes,
        edges: edges
    };
    var options = {
        "nodes": {
            "borderWidthSelected": 3,
            "color": {
                "highlight": {},
                "hover": {}
            },
            "font": {
                "size": null,
                "strokeWidth": null
            },
            "scaling": {
                "min": 34,
                "max": null
            },
            "shape": "circle",
            "shapeProperties": {
                "borderRadius": null
            },
            "size": null
        },
        "edges": {
            "arrows": {
                "to": {
                    "enabled": true,
                    "scaleFactor": 1.85
                }
            },
            "smooth": {
                "forceDirection": "none"
            }
        },
        "manipulation": {
            "enabled": true
        },
        "physics": {
            "enabled": false,
            "minVelocity": 0.75
        }
    };
    var network = new vis.Network(container, data, options);

    function exportNetwork() {

        var nodes = objectToArray(network.getPositions());

        nodes.forEach(addConnections);
        console.log(nodes);
//
//      // pretty print node data
//      var exportValue = JSON.stringify(nodes, undefined, 2);
//
//      exportArea.value = exportValue;
//
//      resizeExportArea();
    }
    function objectToArray(obj) {
        return Object.keys(obj).map(function (key) {
            obj[key].id = key;
            return obj[key];
        });
    }
    function addConnections(elem, index) {
        // need to replace this with a tree of the network, then get child direct children of the element
        elem.connections = network.getConnectedNodes(index);
    }
</script>

<input type="button" id="export_button" onclick="exportNetwork()" value="export">

</body>
</html>
